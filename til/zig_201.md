#### Refer
```yaml
- https://andrewkelley.me/post/a-better-way-to-implement-bit-fields.html
```

#### Takeaways
```yaml
- In C, bit-fields have special syntax
- In C the bit fields have a type then an extra colon and a number of bits
- Load Minimal Number of Bits Necessary
- Define How Bits Are Laid Out In Memory
- Deal with Endianness When a bit-field has more than 8 bits and crosses a byte boundary
- Types Are First Class Values At Compile Time
- const i13 = @intType(true, 13);
- Has 3 Different Struct layouts:
  - Default - compiler may re-arrange fields and insert padding
  - extern - compatible with the target environment C ABI
  - packed - fields in exact order specified, no padding
- In packed struct, programmer is directly in charge of the memory layout of the struct
- If a field greater than 8 bits is byte-aligned:
  - it is represented in memory with the endianness of the host
- If the field is not byte-aligned, it is represented in memory in big-endian
- Boolean values are represented as 1 bit in packed structs
```

```yaml
- An object that is "8 bytes aligned" is stored at a memory address that is a multiple of 8
- Many CPUs will only load some data types from aligned locations
- On Other CPUs such access is just faster
```

```zig
fn f() u3 {
  const ptr = &foo.b; // this is a pointer
  return ptr.*; // bit offset & length is carried in the type of pointer
}
```

#### Refer
```yaml
https://www.flamingspork.com/blog/2014/11/14/c-bitfields-considered-harmful/
```

#### Takeaways
```yaml
- In C (and C++) you can specify that a variable should take a specific number of bits of storage
- By doing “uint32_t foo:4;” rather than just “uint32_t foo”
- In this example, the former uses 4 bits while the latter uses 32bits
- This can be useful to pack many bit fields together
```

```yaml
- In reality, the C spec allows the compiler to do just about anything it wants with these bitfields
- Which usually means it’s something you didn’t expect
```

```yaml
- Where this can get interesting is in:
  - Network protocols (OMG DO NOT DO IT)
  - APIs (OMG DO NOT DO IT)
  - Protecting different parts of a struct with different mutexes (EEP, don’t do it!)
  - Performance
```
